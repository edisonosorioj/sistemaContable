CREATE DATABASE storytellers;

USE storytellers;

CREATE TABLE `administradores` (
  `idadmin` INT NOT NULL AUTO_INCREMENT,
  `documento` VARCHAR(45) NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido` VARCHAR(45) NOT NULL,
  `idrol` INT(10) NOT NULL,
  `login` VARCHAR(45) NOT NULL,
  `contrasena` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`idadmin`));

CREATE TABLE `clientes` (
  `id` INT(10) NOT NULL AUTO_INCREMENT,
  `documento` VARCHAR(45) NOT NULL,
  `empresa` VARCHAR(100) NULL,
  `nombres` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NULL,
  `direccion` VARCHAR(45) NULL,
  `ciudad` VARCHAR(45) NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `compras` (
  `idcompras` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATE NOT NULL,
  `cantidad` INT,
  `producto` VARCHAR(45) NOT NULL,
  `detalles` VARCHAR(100) NULL,
  `valor` VARCHAR(45) NULL,
  PRIMARY KEY (`idcompras`));

CREATE TABLE `ingresos` (
  `idingresos` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATE NOT NULL,
  `cantidad` INT NULL,
  `producto` VARCHAR(45) NOT NULL,
  `detalles` VARCHAR(100) NULL,
  `valor` VARCHAR(45) NULL,
  PRIMARY KEY (`idingresos`));

CREATE TABLE `creditos` (
  `idcreditos` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATE NOT NULL,
  `detalles` VARCHAR(100) NULL,
  `valor` VARCHAR(10) NULL,
  `idclientes` INT NOT NULL,
  PRIMARY KEY (`idcreditos`));

CREATE TABLE `productos` (
  `idproductos` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATE NOT NULL,
  `nombre` VARCHAR(100) NOT NULL,
  `disponible` MEDIUMINT(10) NULL DEFAULT 0,
  `valor` varchar(45) NULL,
  `proveedor_id` INT NOT NULL,
  PRIMARY KEY (`idproductos`));

  CREATE TABLE `pedidos` (
  `pedido_id` INT NOT NULL AUTO_INCREMENT,
  `cliente_id` INT NOT NULL,
  `nombre_pedido` VARCHAR(45) NULL,
  `t_costo` VARCHAR(45) NULL,
  `start` DATETIME NULL,
  `end` DATETIME NULL,
  `color` VARCHAR(45) NULL,
  `estado` INT NOT NULL,
  `sede_id` INT NULL,
  `invitados` VARCHAR(45) NULL,
  PRIMARY KEY (`pedido_id`, `cliente_id`));

CREATE TABLE `pedidoProductos` (
  `peproducto_id` INT NOT NULL AUTO_INCREMENT,
  `producto` VARCHAR(500) NULL,
  `valoru` VARCHAR(10) NULL,
  `cantidad` VARCHAR(10) NULL,
  `valort` VARCHAR(10) NULL,
  `pedido_id` INT NOT NULL,
  `cliente_id` INT NOT NULL,
  `producto_id` INT NOT NULL,
  PRIMARY KEY (`peproducto_id`));

CREATE TABLE `variables` (
  `variable_id` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `detalle` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`variable_id`));

CREATE TABLE `proveedores` (
  `proveedor_id` INT(10) NOT NULL AUTO_INCREMENT,
  `documento` VARCHAR(45) NOT NULL,
  `empresa` VARCHAR(100) NULL,
  `nombres` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NULL,
  `direccion` VARCHAR(45) NULL,
  PRIMARY KEY (`proveedor_id`));


CREATE TABLE `sede` (
  `sede_id` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  `estado` VARCHAR(45) NULL DEFAULT 1,
  PRIMARY KEY (`sede_id`));
  

//Configuracion Básica para Cuenta de Cobro
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('1', 'empresa', 'MI EMPRESA');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('2', 'tipo_identificacion', 'CC');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('3', 'identificacion', '1.123.456.789');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('4', 'lugar_expedicion', 'Marinilla');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('5', 'forma_de_pago', 'Favor consignar en la cuenta de Ahorros Bancolombia 123-456789-00 a nombre de MI EMPRESA.');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('6', 'tel', '9876543');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('7', 'cel', '3211234567');
INSERT INTO variables (variable_id, nombre, detalle) VALUES ('8', 'consecutivo', '0');

INSERT INTO administradores (idadmin, documento, nombre, apellido, idrol,login, contrasena) VALUES ('1', '123456789', 'Usuario', 'Inicial', '0', 'usuario', '401cec94d3ed586d8cb895c10c0f7db6');


NOVEDADES BASES DE DATOS

//Cambio en la tabla SEDE. Se agrega el campo Color
ALTER TABLE `sede` 
ADD COLUMN `color` VARCHAR(45) NULL AFTER `estado`;

CREATE TABLE `lista_precios` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `item_id` VARCHAR(45) NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`id`));

insert into item set nombre = 'Instalaciones';
insert into item set nombre = 'Entrada';
insert into item set nombre = 'Plato Fuerte';
insert into item set nombre = 'Mezcladores';
insert into item set nombre = 'Menaje';
insert into item set nombre = 'Direccionamiento del Evento';
insert into item set nombre = 'Rustico';
insert into item set nombre = 'Licor';

insert into lista_precios set item_id = 1, descripcion = 'Salón, mobiliario, parqueadero, iluminación decorativa, espacio al aire libre y energía';
insert into lista_precios set item_id = 1, descripcion = 'Sólo salón, mobiliario, parqueadero, iluminación decorativa, espacio al aire libre, seguridad, aseo, administrador y energía';


CREATE TABLE `item` (
  `item_id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  PRIMARY KEY (`item_id`));

CREATE TABLE `cotizacion` (
  `cotizacion_id` INT NOT NULL AUTO_INCREMENT,
  `tipo_evento` VARCHAR(45) NULL,
  `invitados` VARCHAR(45) NULL,
  `instalaciones` VARCHAR(45) NULL,
  `entrada` VARCHAR(45) NULL,
  `plato_fuerte` VARCHAR(45) NULL,
  `mezcladores` VARCHAR(45) NULL,
  `menaje` VARCHAR(45) NULL,
  `personal` VARCHAR(45) NULL,
  `direccionamiento` VARCHAR(45) NULL,
  `rustico` VARCHAR(45) NULL,
  `licor` VARCHAR(45) NULL,
  `observaciones` VARCHAR(45) NULL,
  `pedido_id` VARCHAR(45) NULL,
  `cliente_id` VARCHAR(45) NULL,
  PRIMARY KEY (`cotizacion_id`));



